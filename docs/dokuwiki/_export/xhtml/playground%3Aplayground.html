<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru"
 lang="ru" dir="ltr">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>playground:playground</title>
<meta name="generator" content="DokuWiki snapshot?" />
<meta name="robots" content="index,follow" />
<meta name="date" content="2009-09-24T21:23:38+0000" />
<meta name="keywords" content="playground,playground" />
<link rel="search" type="application/opensearchdescription+xml" href="../../lib/exe/opensearch.php" title="phpMorphy home" />
<link rel="start" href="../../../index.html" />
<link rel="contents" href="../../playground%253Aplayground@do=index.html" title="Все страницы" />
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="../../feed.php" />
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="../../feed.php@mode=list&amp;ns=playground" />
<link rel="alternate" type="text/html" title="Plain HTML" href="playground%253Aplayground.html" />
<link rel="stylesheet" media="all" type="text/css" href="../../lib/exe/css.php@s=all&amp;t=phpmorphy.css" />
<link rel="stylesheet" media="screen" type="text/css" href="../../lib/exe/css.php@t=phpmorphy.css" />
<link rel="stylesheet" media="print" type="text/css" href="../../lib/exe/css.php@s=print&amp;t=phpmorphy.css" />
<script type="text/javascript" charset="utf-8" src="../../lib/exe/js.php@edit=0&amp;write=0" ></script>
<script type="text/javascript" charset="utf-8" src="../../lib/plugins/tableedit/tableedit.js" ></script>
</head>
<body>
<div class="dokuwiki export">
<!-- TOC START -->
<div class="toc">
<div class="tocheader toctoggle" id="toc__header">Содержание</div>
<div id="toc__inside">

<ul class="toc">
<li class="level1"><div class="li"><span class="li"><a href="playground%253Aplayground.html#phpmorphy" class="toc">phpMorphy</a></span></div>
<ul class="toc">
<li class="level2"><div class="li"><span class="li"><a href="playground%253Aplayground.html#особенности_реализации" class="toc">Особенности реализации:</a></span></div></li>
<li class="level2"><div class="li"><span class="li"><a href="playground%253Aplayground.html#словари" class="toc">Словари</a></span></div></li>
<li class="level2"><div class="li"><span class="li"><a href="playground%253Aplayground.html#установка" class="toc">Установка</a></span></div></li>
<li class="level2"><div class="li"><span class="li"><a href="playground%253Aplayground.html#инициализация" class="toc">Инициализация</a></span></div></li></ul>
</li></ul>
</div>
</div>
<!-- TOC END -->



<h1><a name="phpmorphy" id="phpmorphy">phpMorphy</a></h1>
<div class="level1">

<p>
phpMorphy – библиотека морфологического анализа, реализованная на платформе <acronym title="Hypertext Preprocessor">PHP</acronym>.
</p>

<p>
phpMorphy позволяет решать следующие задачи:
</p>
<ul>
<li class="level1"><div class="li"> Лемматизация (получение нормальной формы слова)</div>
</li>
<li class="level1"><div class="li"> Получение всех форм слова</div>
</li>
<li class="level1"><div class="li"> Получение грамматической информации для слова (часть речи, падеж, спряжение и т.д.)</div>
</li>
<li class="level1"><div class="li"> Изменение формы слова в соответствии с заданными грамматическими характеристиками</div>
</li>
<li class="level1"><div class="li"> Изменение формы слова по заданному образцу</div>
</li>
</ul>

</div>
<!-- SECTION "phpMorphy" [1-784] -->
<h2><a name="особенности_реализации" id="особенности_реализации">Особенности реализации:</a></h2>
<div class="level2">

<p>
Библиотека написана на php, для работы не требуется никаких экзотических расширений. В зависимости от режима могут потребоваться следующие расширения: 
</p>
<ul>
<li class="level1"><div class="li"> shmop - для загрузки словаей в разделяемую память</div>
</li>
<li class="level1"><div class="li"> mbstring или iconv  - для ускорения работы с данными в Unicode кодировках.</div>
</li>
</ul>

<p>
Поддерживаются различные кодировки: 
</p>
<ul>
<li class="level1"><div class="li"> все однобайтовые (windows-1251, ascii и т.п.)</div>
</li>
<li class="level1"><div class="li"> Unicode кодировки - utf-8, utf-16le/be, utf-32, ucs2, ucs4. </div>
</li>
</ul>

<p>
Имеется возможность работать со словарями AOT и/или myspell. 
</p>

</div>
<!-- SECTION "Особенности реализации:" [785-1643] -->
<h2><a name="словари" id="словари">Словари</a></h2>
<div class="level2">

<p>
phpMorphy использует для работы словарь. Поддерживаются словари проекта AOT (<a href="http://aot.ru" class="urlextern" title="http://aot.ru"  rel="nofollow">http://aot.ru</a>) и myspell (в myspell словарях отсутствует грамматическая информация, потому часть функций будет недоступна). Словари представлены в двух видах: в исходном и бинарном.
Исходный словарь представлен в виде xml файла и содержит
</p>
<ul>
<li class="level1"><div class="li"> Основы слов</div>
</li>
<li class="level1"><div class="li"> Правила изменения</div>
</li>
<li class="level1"><div class="li"> Грамматическая информация</div>
</li>
</ul>

<p>
Более подробно структура словаря описана в <a href="http://www.aot.ru/docs/sokirko/Dialog2004.htm" class="urlextern" title="http://www.aot.ru/docs/sokirko/Dialog2004.htm"  rel="nofollow">http://www.aot.ru/docs/sokirko/Dialog2004.htm</a>, в phpMorphy словарь в исходной форме представлен аналогично. Имеется возможность преобразовать myspell словарь в исходную форму словаря для phpMorphy.
</p>

<p>
Для работы библиотеки требуется скомпилировать бинарный словарь. При компиляции используется словарь в исходном виде. Бинарный словарь обладает следующими особенностями:
</p>
<ul>
<li class="level1"><div class="li"> бинарно совместим между различными платформами</div>
</li>
<li class="level1"><div class="li"> все данные представлены в заданной кодировке, в верхнем (по умолчанию) или нижнем регистре.</div>
</li>
</ul>

<p>
Последний пункт позволяет не тратить время на преобразование кодировки и регистра в реальном времени, а сделать это один раз на этапе компиляции. Разработчик предоставить данные в кодировке и регистре совпадающим с кодировкой и регистром в словаре.
</p>

<p>
Физически словарь представлен в виде нескольких файлов:
</p>
<ul>
<li class="level1"><div class="li"> Key ⇒ value хранилище всех словоформ. Хранилище - использует модель минимального детерминированного конечного автомата (DAWG), позволяет искать слово за линейное от длины слова время O(N), N – длина слова. Разработано по мотивам How to Squeeze a Lexicon by Marcin Ciura Sebastian ,  Sebastian Deorowicz. Располагается в файле common_aut.ru</div>
</li>
<li class="level1"><div class="li"> Хранилище грамматической информации, таблицы окончаний, граммем (файл morph_data.bin)</div>
</li>
<li class="level1"><div class="li"> Хранилище окончаний для предсказания (файл predict_aut.bin) используется структура похожая на описанную в п1.</div>
</li>
<li class="level1"><div class="li"> Вспомогательные файлы (кэши для php версии, опции и т.п.)</div>
</li>
</ul>

<p>

Именование файлов словаря сделано следующим образом: ИМЯ_ФАЙЛА.ЯЗЫК.bin, где ЯЗЫК – условный код языка, в виде ISO3166 код страны и ISO639 код языка т.е. ru_ru, en_en и т.п. Данный метод позволяет размещать в одном каталоге словари для нескольких языков. К примеру, файлы для русского словаря:

</p>
<pre class="code">
common_aut.ru_ru.bin
gramtab.ru_ru.bin
gramtab_txt.ru_ru.bin
morph_data.ru_ru.bin
morph_data_ancodes_cache.ru_ru.bin
morph_data_ancodes_map.ru_ru.bin
morph_data_header_cache.ru_ru.bin
predict_aut.ru_ru.bin
options.ru_ru.ini
</pre>

<p>
Если требуется иметь словари для одного языка, но в разных кодировках, рекомендую создать такую иерархию директорий:

</p>
<pre class="code">
dicts\
    utf-8\
        словари в utf-8 кодировке
    windows\
        словари в windows кодировке: windows-1251 (русский), windows-1250 (английский) и т.п.
    iso-8859\
        словари в семействе iso-8859 кодировок
</pre>

</div>
<!-- SECTION "Словари" [1644-6117] -->
<h2><a name="установка" id="установка">Установка</a></h2>
<div class="level2">

<p>
Для работы Вам потребуется
</p>
<ul>
<li class="level1"><div class="li"> Исходный код библиотеки.</div>
</li>
<li class="level1"><div class="li"> Один или несколько словарей в бинарном виде. </div>
</li>
</ul>
<ol>
<li class="level1"><div class="li"> Скачайте последнюю версию библиотеки. </div>
</li>
<li class="level1"><div class="li"> Распакуйте архив (к примеру, в каталог c:\php\libs\phpmorphy). Рекомендуется разместить код бибилотеки в директории недоступной web серверу. Для Apache к примеру, выше DocumentRoot.</div>
</li>
<li class="level1"><div class="li"> Скачайте необходимые словари. Распакуйте файл со словарями (используем c:\php\libs\phpmorphy\dicts). В c:\php\libs\phpmorphy\dicts должны находится файлы словаря т.е. common_aut.*.bin, predict_aut.*.bin и т.п.</div>
</li>
</ol>

</div>
<!-- SECTION "Установка" [6118-7018] -->
<h2><a name="инициализация" id="инициализация">Инициализация</a></h2>
<div class="level2">
<pre class="code php"><span class="co1">// Подключите файл common.php. phpmorphy-0.3.2 - для версии 0.3.2, если используется иная версия скорректируйте код.</span>
<span class="kw1">require_once</span><span class="br0">&#40;</span> <span class="st_h">'c:/php/libs/phpmorphy/phpmorphy-0.3.2/src/common.php'</span><span class="br0">&#41;</span>;
&nbsp;
<span class="co1">// Укажите путь к каталогу со словарями</span>
<span class="re0">$dir</span> <span class="sy0">=</span> <span class="st_h">'c:/php/libs/phpmorphy/dicts'</span>;
&nbsp;
<span class="co1">// Укажите, для какого языка будем использовать словарь.</span>
<span class="co1">// Язык указывается как ISO3166 код страны и ISO639 код языка, </span>
<span class="co1">// разделенные символом подчеркивания (ru_RU, uk_UA, en_EN, de_DE и т.п.)</span>
&nbsp;
<span class="re0">$lang</span> <span class="sy0">=</span> <span class="st_h">'ru_RU'</span>;
&nbsp;
<span class="co1">// Укажите опции </span>
<span class="re0">$opts</span> <span class="sy0">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <span class="st_h">'storage'</span> <span class="sy0">=&gt;</span> PHPMORPHY_STORAGE_FILE<span class="sy0">,</span>
<span class="br0">&#41;</span>;
&nbsp;
<span class="co1">// создаем экземпляр класса phpMorphy</span>
<span class="co1">// обратите внимание: все функции phpMorphy являются throwable т.е. </span>
<span class="co1">// могут возбуждать исключения типа phpMorphy_Exception (конструктор тоже)</span>
try <span class="br0">&#123;</span>
    <span class="re0">$morphy</span> <span class="sy0">=</span> <span class="kw2">new</span> phpMorphy<span class="br0">&#40;</span><span class="re0">$dir</span><span class="sy0">,</span> <span class="re0">$lang</span><span class="sy0">,</span> <span class="re0">$opts</span><span class="br0">&#41;</span>;
<span class="br0">&#125;</span> catch<span class="br0">&#40;</span>phpMorphy_Exception <span class="re0">$e</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <a href="http://www.php.net/die"><span class="kw3">die</span></a><span class="br0">&#40;</span><span class="st_h">'Error occured while creating phpMorphy instance: '</span> <span class="sy0">.</span> <span class="re0">$e</span><span class="sy0">-&gt;</span><span class="me1">getMessage</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
<span class="br0">&#125;</span>
&nbsp;
<span class="co1">// далее под $morphy мы подразумеваем экземпляр класса phpMorphy</span></pre>
<p>
<a href="http://phpmorphy.sourceforge.net/dokuwiki/_media/playground#!html
%3Ctable%3E
  %3Ccaption%3EОпции%3C/caption%3E
  %3Ctr%3E
     %3Ctd%3Eопция%3C/td%3E
     %3Ctd%3Eдопустимые значения%3C/td%3E
     %3Ctd%3Eпримечания%3C/td%3E
  %3C/tr%3E
%3C/table%3E" class="media mediafile mf_ wikilink2" title="playground">playground</a>}

</p>

</div>
<!-- SECTION "Инициализация" [7019-] --></div>
</body>
</html>
